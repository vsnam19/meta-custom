# Meta-custom layer configuration for C++20 applications and services

# Layer identification
BBPATH .= ":${LAYERDIR}"

# Layer recipes and classes
BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \
            ${LAYERDIR}/recipes-*/*/*.bbappend"

BBFILE_COLLECTIONS += "meta-custom"
BBFILE_PATTERN_meta-custom = "^${LAYERDIR}/"
BBFILE_PRIORITY_meta-custom = "6"

# Layer version for compatibility tracking
LAYERVERSION_meta-custom = "1"

# Compatible with Yocto LTS release
LAYERSERIES_COMPAT_meta-custom = "scarthgap"

# Required layers (meta-raspberrypi provides Pi 3B hardware support)
LAYERDEPENDS_meta-custom = "\
    core \
    openembedded-layer \
    raspberrypi \
"

# C++20 development configuration
PREFERRED_VERSION_gcc = "13.%"
PREFERRED_VERSION_gcc-cross-canadian-arm = "13.%"

# Layer-specific configuration variables
META_CUSTOM_BASE = "${LAYERDIR}"
META_CUSTOM_RECIPES = "${LAYERDIR}/recipes-apps"

# License handling for custom applications
LICENSE_PATH += "${LAYERDIR}/licenses"

# Custom applications and services features
DISTRO_FEATURES_append = " systemd"
VIRTUAL-RUNTIME_init_manager = "systemd"